<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
  <a href="https://www.facebook.com/v4.0/dialog/oauth?client_id=389496751725269&redirect_uri=https://abhay07.github.io/insta">Authenticate</a>
	<div id="status">
		
	</div>
  <div>Token is <span id="token"></span></div>
<!-- 	<div>
		<input type="text" placeholder="Enter Insta id" id="instaid"/><button onclick="fetchStories()">Fetch stories</button>
	</div>
	<div id="storyIds">
		
	</div> -->
</body>
<script>
/*	if((window.location.href.indexOf('error') > -1 )|| (window.location.href.indexOf('#access_token=') > -1)  ){
		const token = window.location.href.split('#access_token=')[1];
		fetch(`https://api.instagram.com/v1/users/self/media/recent/?access_token=${token}`)
		.then((res)=>res.json())
		.then((res)=>{
			document.getElementById('data').innerText = JSON.stringify(res);
		})
		.catch(err=>{
			console.log(err);
		})
	}

	function authenticate(){
		window.location.href = 'https://api.instagram.com/oauth/authorize/?client_id=0b0a0d9446a04207b913523cfcd0f739&redirect_uri=https://abhay07.github.io/insta/&response_type=token';
	}
*/
/*document.getElementById('status').innerText = 'You are not authenticated yet';
let accessToken = '',userId = '';
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '389496751725269',
      cookie     : true,
      xfbml      : true,
      version    : 'v4.0'
    });
      
    FB.AppEvents.logPageView();   
      
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

  function authenticate(){
  	FB.login(function(response){
		if (response.status === 'connected') {
			accessToken = response.authResponse.accessToken;
			userId = response.authResponse.userId;
      document.getElementById('token').innerText = accessToken;
			document.getElementById('status').innerText = 'You are authenticated';
		} else {
		// The person is not logged into your webpage or we are unable to tell. 
		}
	},{scope:'instagram_basic,instagram_manage_insights,pages_show_list'});
  }
  */

 /* function fetchStories(){
  	const instaId = document.getElementById('instaid').value;
  	if(instaid){
  		fetch(`https://graph.facebook.com/${userId}/stories?access_token=${accessToken}`)
  		.then((res)=>res.json())
  		.then(res=>{
  			let html = '';
  			for(let i=0;i<res.data.length;i++){
  				html+=`<div>${res.data[i].id}</div>`
  			}
  			document.getElementById('storyIds').innerHTML = html;
  		})
  		.catch(err=>{
  			console.log(err);
  		})
  	}
  	else{
  		document.getElementById('status').innerText = 'Please enter instaid';
  	}
  }*/
</script>
</html>